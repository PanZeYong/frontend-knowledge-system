<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>前端工具函数</title>
</head>

<body>
  <noscript>
    <strong>We're sorry but 前端工具函数 JSSDK doesn't work properly without JavaScript enabled.
        Please enable it to continue.</strong>
  </noscript>
  <div id="app">
  </div>
  <script src="./tool-function.min.js"></script>

  <script>
    const { deepCopy, flattenObject, flattenArray, apply, call, bind } = tool
    const obj = {
      a: 1,
      b: {
        c: 2
      },
      d: [
        {
            e: 3
        }
      ]
    }
    const obj2 = deepCopy(obj)
    obj2.b.c = 3
    console.log(obj, obj2) // 2

    console.log('--------flattenObject----------')
    const user = {
      name: 'panju',
      age: '18',
      address: {
        city: 'beijing',
        area: 'haidian'
      },
      hobby: {
        sport: {
          basketball: '篮球',
          football: '足球'
        },
        music: {
          pop: '流行',
          rock: '摇滚'
        }
      },
      friends: ['xiaoming', 'xiaohong', 'xiaoliang'],
      houses: [
        {
          city: 'beijing',
          area: 'haidian'
        },
        {
          city: 'beijing',
          area: 'chaoyang'
        }
      ]
    }

    console.log(flattenObject(user))

    console.log('--------flattenArray----------')
    const arr = [1, [2, [3, [4, [ { a: 1, b: 2 }, [9, 8] ]]]]]
    console.log(flattenArray(arr))

    const test = () => {
      console.log(this.value, this)
    }

    function test1 () {
      console.log(this.value)
    }

    Function.prototype.apply = apply
    Function.prototype.call = call
    Function.prototype.bind = bind

    var value = 3

    // test.apply()

    // test1.call({ value: 2})

    var x = 43

    /**const module = {
      x: 42,
      getX: function () {
        return this.x;
      },
    };
    
    const unboundGetX = module.getX;
    console.log(unboundGetX()); // The function gets invoked at the global scope
    // Expected output: undefined
    
    const boundGetX = unboundGetX.bindWithoutConstrcutor(module);
    console.log(boundGetX());*/

    function Point(x, y) {
      this.x = x;
      this.y = y;
    }
    
    Point.prototype.toString = function () {
      return this.x + "," + this.y;
    };
    
    var p = new Point(1, 2);
    p.toString(); // '1,2'
    
    var emptyObj = {};
    var YAxisPoint = Point.bind(emptyObj, 0 /*x*/);
    new YAxisPoint()

  </script>

</body>
</html>